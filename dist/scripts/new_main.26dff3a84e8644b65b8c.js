(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(i)?i:String(i)),r)}var i}var n=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._elementSelector=t,this.handleCardClick=n}return n=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._elementSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_getImage",value:function(){return this._element.querySelector(".element__img")}},{key:"_handleDeleteClick",value:function(){this._element.remove(),this._element=null}},{key:"_handleLikeClick",value:function(){this._element.querySelector(".element__button").classList.toggle("element__button_active")}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__delete").addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(".element__button").addEventListener("click",(function(){e._handleLikeClick()})),this._image.addEventListener("click",(function(){e._handleCardClick()}))}}])&&t(n.prototype,o),r&&t(n,r),Object.defineProperty(n,"prototype",{writable:!1}),e;var n,o,r}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var c=i((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_showInputError",(function(e,t){var n=document.getElementById("".concat(e.id,"-error"));e.classList.add(o._config.inputErrorClass),n.textContent=t})),u(this,"_hideInputError",(function(e){var t=document.getElementById("".concat(e.id,"-error"));e.classList.remove(o._config.inputErrorClass),t.textContent=""})),u(this,"_checkInputValidity",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e,e.validationMessage)})),u(this,"_hasInvalidInput",(function(){return o._inputList.some((function(e){return!e.validity.valid}))})),u(this,"_toggleButtonState",(function(){o._hasInvalidInput()?(o._buttonElement.classList.add(o._config.inactiveButtonClass),o._buttonElement.setAttribute("disabled",!0)):(o._buttonElement.classList.remove(o._config.inactiveButtonClass),o._buttonElement.removeAttribute("disabled"))})),u(this,"_setEventListeners",(function(){o._toggleButtonState(),o._inputList.forEach((function(e){e.addEventListener("input",function(){this._checkInputValidity(e),this._toggleButtonState()}.bind(o))}))})),u(this,"enableValidation",(function(){o._formElement.addEventListener("submit",(function(e){e.preventDefault()})),o._setEventListeners()})),u(this,"disableSubmitButton",(function(){o._buttonElement.classList.add(o._config.inactiveButtonClass),o._buttonElement.setAttribute("disabled",!0)})),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)})),a=document.querySelector(".content"),s=document.querySelector(".popup_edit"),p=document.querySelector(".popup_add"),d=document.querySelector(".popup_image"),m=a.querySelector(".profile__edit-button"),_=a.querySelector(".profile__add-button"),f=d.querySelector(".popup__close"),y=s.querySelector(".popup__close"),v=p.querySelector(".popup__close"),b=a.querySelector(".profile__usermane"),h=a.querySelector(".profile__about"),S=s.querySelector(".popup__form"),g=p.querySelector(".popup__form"),k=document.querySelector(".popup__input_type_username"),E=document.querySelector(".popup__input_type_job"),q=g.querySelector(".popup__input_type_title"),L=g.querySelector(".popup__input_type_link"),C=document.querySelector(".elements"),w=(d.querySelector(".popup__caption"),d.querySelector(".popup__photo"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__form-submit",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input-error"}),j=function(e,t){return new n(e,t,".element-template",".element__img").generateCard()};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){C.append(j(e.name,e.link))}));var B=new c(w,S),I=new c(w,g);function x(e){"Escape"===e.key&&P(document.querySelector(".popup_opened"))}function P(e){e.classList.remove("popup_opened"),window.removeEventListener("keydown",x),e.removeEventListener("click",closeByClickOverlay)}B.enableValidation(),I.enableValidation(),S.addEventListener("submit",(function(e){e.preventDefault(),b.textContent=k.value,h.textContent=E.value,P(s)})),m.addEventListener("click",(function(){return k.value=b.textContent,E.value=h.textContent,void openPopup(s)})),_.addEventListener("click",(function(){return openPopup(p)})),y.addEventListener("click",(function(){return P(s)})),v.addEventListener("click",(function(){return P(p)})),f.addEventListener("click",(function(){return P(d)})),g.addEventListener("submit",(function(e){var t,n;e.preventDefault(),t=q.value,n=L.value,C.prepend(j(t,n)),q.value="",L.value="",P(p),I.disableSubmitButton()}))})();